{% extends "base.html.twig" %}

{% block title %}
    Feed
{% endblock title %}

{% block stylesheets %}

{% endblock stylesheets %}

{% block body %}
    <h1 class="text-2xl">
        Activity log
    </h1>

    <timeline-wrapper>
        {% for post in posts %}
            {% if post|instanceOf("App\\Entity\\Publication") %}
                <timeline-thread type="{{ post.type }}">
                    <timeline-publication date="{{ post.publishedAtToISO8601 }}">
                        {% if post|instanceOf("App\\Entity\\Article") %}
                            <timeline-thread-title slot="title">
                                {{ post.title }}
                            </timeline-thread-title>
                        {% endif %}

                        {% if post.tags is not empty %}
                            <tag-container slot="tags">
                                {% for tag in post.tags %}
                                    <x-tag name="{{ tag.name }}"></x-tag>
                                {% endfor %}
                            </tag-container>
                        {% endif %}
                        <timeline-thread-content slot="preview" {{ post|instanceOf("App\\Entity\\Article") ? "lines='4'" : "" }}>
                            {{ post.preview }}
                        </timeline-thread-content>
                    </timeline-publication>
                </timeline-thread>
            {% else %}
                <timeline-thread type="{{ post.type }}">
                    <timeline-event date="{{ post.publishedAtToISO8601 }}" content="{{ post.preview }}"></timeline-event>
                </timeline-thread>
            {% endif %}
        {% endfor %}
    </timeline-wrapper>
{% endblock body %}

{% block javascripts %}
    {{ encore_entry_script_tags("component:Tag") }}
    {{ encore_entry_script_tags("component:TimeElapsed") }}
    {{ encore_entry_script_tags("component:TagContainer") }}

    {{ encore_entry_script_tags("component:TimelineWrapper") }}
    {{ encore_entry_script_tags("component:TimelineThread") }}
    {{ encore_entry_script_tags("component:TimelineEvent") }}
    {{ encore_entry_script_tags("component:TimelinePublication") }}

    {{ encore_entry_script_tags("component:TimelineThreadTitle") }}
    {{ encore_entry_script_tags("component:TimelineThreadContent") }}
{% endblock javascripts %}
